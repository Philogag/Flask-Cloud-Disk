<!DOCTYPE html>
<html lang="zh">

<head>
    <meta charset="UTF-8">
    <title>个人中心</title>
    <link rel="stylesheet" href="static/css/layui.css">
    <link rel="stylesheet" href="static/css/style.css" media="all">
    <meta name="renderer" content="webkit">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <!-- 注意：如果你直接复制所有代码到本地，上述css路径需要改成你本地的 -->
</head>


<body>
    <header class="layui-bg-black">
        <div>个人中心</div>
        <ul class="layui-nav " lay-filter="">

            <li class="layui-nav-item">
                <a href="javascript:;">user</a>
                <dl class="layui-nav-child layui-bg-blacK">
                    <!-- 二级菜单 -->
                    <dd><a href="login">退出</a></dd>
                    <!--退出登录 -->
                </dl>
            </li>
        </ul>
    </header>

    <!--主体-->
    <div class="main">
        <!-- 左侧导航-->
        <div class="left layui-bg-black">
            <ul class="layui-nav layui-nav-tree" lay-filter="test">
                <li class="layui-nav-item layui-nav-itemed">
                    <a href="javascript:;">文件管理</a>
                    <dl class="layui-nav-child">
                        <dd><a href="javascript:;">文件</a></dd>
                        <dd><a href="">回收站</a></dd>
                    </dl>
                </li>
            </ul>
        </div>

        <!--导航栏-->
        <div class="right">
            <!--导航-->
            <div class="layui-btn-container">
                <button type="button" class="layui-btn" id="upload"><i class="layui-icon"></i>上传文件</button>
                <div class="layui-btn-group">
                    <button type="button" class="layui-btn">新建文件夹</button>
                </div>


                <br />

                <!-- 文件 -->
                <table class="layui-hide" id="test" lay-filter="test"></table>
                <script type="text/html" id="toolbarDemo">
                  <div class="breadcrumb">
                    <span class="layui-breadcrumb" lay-separator="|">
                        <a href="">返回上一级</a>
                        <a href=""></a>
                    </span>
    
                    <span class="layui-breadcrumb" lay-separator=">">
                        <a href="">全部文件</a>
                        <a href="">c</a>
                        <a><cite>d</cite></a>
                    </span>
                </div>
          </div>

        </script>

                <script src="static/layui.js" charset="utf-8"></script>
                <!-- 注意：如果你直接复制所有代码到本地，上述 JS 路径需要改成你本地的 -->

                <script>
                    layui.use('table', function () {
                        var table = layui.table;

                        table.render({
                            elem: '#test'
                            , url: '/api/fs/list'
                            , toolbar: '#toolbarDemo' //开启头部工具栏，并为其绑定左侧模板
                            , defaultToolbar: ['filter', 'exports', 'print', { //自定义头部工具栏右侧图标。如无需自定义，去除该参数即可
                                title: '提示'
                                , layEvent: 'LAYTABLE_TIPS'
                                , icon: 'layui-icon-tips'
                            }]
                            , title: '用户数据表'
                            , cols: [[
                                { type: 'checkbox', fixed: 'left' }
                                , { field: 'id', title: '文件', width: 80, fixed: 'left', unresize: true, sort: true }
                                , { field: 'username', title: '用户名', width: 120, edit: 'text' }
                                , { field: 'reg_time', title: '注册时间', width: 120 }
                                , { field: 'last_login', title: '最后登录', width: 120 }
                                , { fixed: 'right', title: '操作', toolbar: '#barDemo', width: 150 }
                            ]]
                            , page: true
                        });

                        //头工具栏事件
                        table.on('toolbar(test)', function (obj) {
                            var checkStatus = table.checkStatus(obj.config.id);
                            switch (obj.event) {
                                case 'getCheckData':
                                    var data = checkStatus.data;
                                    layer.alert(JSON.stringify(data));
                                    break;
                                case 'getCheckLength':
                                    var data = checkStatus.data;
                                    layer.msg('选中了：' + data.length + ' 个');
                                    break;
                                case 'isAll':
                                    layer.msg(checkStatus.isAll ? '全选' : '未全选');
                                    break;

                                //自定义头工具栏右侧图标 - 提示
                                case 'LAYTABLE_TIPS':
                                    layer.alert('可拖拽至本页面上传文件');
                                    break;
                            };
                        });


                        //监听行工具事件
                        table.on('tool(test)', function (obj) {
                            var data = obj.data;
                            //console.log(obj)
                            if (obj.event === 'del') {
                                layer.confirm('真的删除行么', function (index) {
                                    obj.del();
                                    layer.close(index);
                                });
                            } else if (obj.event === 'edit') {
                                layer.prompt({
                                    formType: 2
                                    , value: data.email
                                }, function (value, index) {
                                    obj.update({
                                        email: value
                                    });
                                    layer.close(index);
                                });
                            }
                        });
                    });
                </script>



                <script type="text/html" id="barDemo">

                <div class="layui-btn-group">
                    <button type="button" class="layui-btn layui-btn-primary layui-btn-sm demolist" data-id="444">
                        <i class="layui-icon layui-font-12">&#xe654;</i>
                    </button>
    
                    <button type="button" class="layui-btn layui-btn-primary layui-btn-sm" lay-event="edit">
                        <i class="layui-icon">&#xe642;</i>
                    </button>
                    <button type="button" class="layui-btn layui-btn-primary layui-btn-sm" lay-event="del">
                        <i class="layui-icon">&#xe640;</i>
                    </button>
                </div>
              
              </script>


            </div>

</body>






<!-- 文件 -->

<script src="static/layui.js" charset="utf-8"></script>
<!-- 注意：如果你直接复制所有代码到本地，上述 JS 路径需要改成你本地的 -->



<!-- 文件上传 -->
<script>
    layui.use('upload', function () {
        var upload = layui.upload;

        //执行实例
        var uploadInst = upload.render({
            elem: '#upload'
            , url: 'https://httpbin.org/post' //改成您自己的上传接口
            , accept: 'file' //普通文件
            , done: function (res) {
                layer.msg('上传成功');
                console.log(res);
            }
        });
    });

</script>


<!-- + 下拉菜单-->
<script>
    layui.use('dropdown', function () {
        var dropdown = layui.dropdown
            , $ = layui.jquery;

        dropdown.render({
            elem: '.demolist'
            , data: [{
                title: 'item 1'
                , id: 'aaa'
            }, {
                title: 'item 2'
                , id: 'bbb'
            }]
            , click: function (data, othis) {
                var elem = $(this.elem)
                    , listId = elem.data('id'); //表格列表的预埋数据
                layer.msg('得到表格列表的 id：' + listId + '，下拉菜单 id：' + data.id);
            }
        });
    });
</script>


<!-- 拖拽上传 -->

<body>
    <style type="text/css">
        div#dropZone {
            background: gray;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 999;
            opacity: 0.6;
            visibility: hidden;
        }

        .desc {
            position: absolute;
            left: 50%;
            top: 50%;
        }
    </style>
    <div id="dropZone">
        <p class="desc">全局拖拽</p>
    </div>

    <script type="text/javascript">
        //拖拽的目标节点
        var dropZone = document.getElementById('dropZone');

        function showDropZone() {
            dropZone.style.visibility = "visible";
        }
        function hideDropZone() {
            dropZone.style.visibility = "hidden";
        }

        function allowDrag(e) {
            if (true) {
                e.dataTransfer.dropEffect = 'copy';
                e.preventDefault();
            }
        }

        function handleDrop(e) {
            e.preventDefault();
            hideDropZone();

            layer.msg('上传成功');
        }

        // 监听widow上的事件
        window.addEventListener('dragenter', function (e) {
            showDropZone();
        });

        dropZone.addEventListener('dragenter', allowDrag);
        dropZone.addEventListener('dragover', allowDrag);

        dropZone.addEventListener('dragleave', function (e) {
            hideDropZone();
        });


        dropZone.addEventListener('drop', handleDrop);
    </script>

</body>



</html>